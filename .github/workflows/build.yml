name: Go Package Build
on: [pull_request, workflow_dispatch]

jobs:
 build:
  runs-on: windows-latest
  steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    - name: Setup Go environment
      uses: actions/setup-go@v4.0.0
      with:
        # Path to the go.mod or go.work file.
        go-version-file: ./src/go.mod
    - name: Build Go Package
      run: build.bat
      shell: cmd
    - uses: actions/upload-artifact@v3
      with:
        path: ./dist/*